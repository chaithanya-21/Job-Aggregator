<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Job Aggregator</title>

<style>
body {font-family:Arial;background:#f3f6f8;margin:0}
.header{background:white;padding:20px 40px;box-shadow:0 2px 6px rgba(0,0,0,0.08)}
.search{display:flex;gap:10px;flex-wrap:wrap}
select,button{padding:10px;font-size:15px}
button{background:#0a66c2;color:white;border:none;border-radius:4px;cursor:pointer}
button:hover{background:#004182}
.section{padding:20px 40px}
.job{background:white;margin-bottom:12px;padding:15px;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.1)}
.title{font-weight:bold;font-size:17px}
.apply{display:inline-block;margin-top:8px;padding:6px 12px;background:#057642;color:white;text-decoration:none;border-radius:4px}
.apply:hover{background:#035e33}
</style>
</head>

<body>

<div class="header">
<h2>Job Aggregator</h2>

<div class="search">

<select id="role">
<option>Business Analyst</option>
<option>Consultant</option>
<option>Strategy Consultant</option>
<option>Management Consultant</option>
<option>AI Engineer</option>
<option>Machine Learning Engineer</option>
<option>Data Scientist</option>
<option>AI Consultant</option>
<option>Project Manager</option>
<option>Program Manager</option>
<option>Delivery Manager</option>
<option>Scrum Master</option>
<option>Product Manager</option>
<option>Product Owner</option>
</select>

<select id="country">
<option>India</option>
<option>United States</option>
<option>United Kingdom</option>
<option>Australia</option>
<option>Canada</option>
</select>

<!-- ðŸ”¹ NEW MODE DROPDOWN -->
<select id="mode">
<option>All</option>
<option>WFH</option>
<option>Hybrid</option>
<option>Office</option>
</select>

<button onclick="loadJobs(1)">Search Jobs</button>

</div>
</div>

<div class="section">
<div id="jobs"></div>

<div style="margin-top:15px">
<button onclick="prevPage()">Previous</button>
<span id="page"></span>
<button onclick="nextPage()">Next</button>
</div>
</div>

<script>

let currentPage=1;

async function loadJobs(page){

currentPage=page;

const role=document.getElementById("role").value;
const country=document.getElementById("country").value;
const mode=document.getElementById("mode").value;

const res=await fetch(`http://localhost:5000/api/jobs?role=${role}&country=${country}&page=${page}&mode=${mode}`);
const jobs=await res.json();

const container=document.getElementById("jobs");
container.innerHTML="";

if(!jobs.length){container.innerHTML="No jobs found"; return;}

jobs.forEach(job=>{
const card=document.createElement("div");
card.className="job";
card.innerHTML=`
<div class="title">${job.title}</div>
<div>${job.company}</div>
<div>${job.state}, ${job.country}</div>
<div>Mode: ${job.mode}</div>
<div>Salary: ${job.salary}</div>
<a class="apply" href="${job.source}" target="_blank">Apply</a>`;
container.appendChild(card);
});

document.getElementById("page").innerText=`Page ${currentPage}`;
}

function nextPage(){ loadJobs(currentPage+1); }
function prevPage(){ if(currentPage>1) loadJobs(currentPage-1); }

loadJobs(currentPage);

</script>

</body>
</html>
